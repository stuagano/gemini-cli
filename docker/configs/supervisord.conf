[supervisord]
nodaemon=true
user=developer
logfile=/workspace/logs/supervisord.log
pidfile=/workspace/logs/supervisord.pid
childlogdir=/workspace/logs

[unix_http_server]
file=/workspace/logs/supervisor.sock
chmod=0700
chown=developer:developer

[supervisorctl]
serverurl=unix:///workspace/logs/supervisor.sock

[rpcinterface:supervisor]
supervisor.rpcinterface_factory = supervisor.rpcinterface:make_main_rpcinterface

[program:agent-server]
command=python src/start_server.py
directory=/workspace
user=developer
autostart=false
autorestart=true
redirect_stderr=true
stdout_logfile=/workspace/logs/agent-server.log
stdout_logfile_maxbytes=10MB
stdout_logfile_backups=3
environment=PYTHONPATH=/workspace,PORT=8000,LOG_LEVEL=debug

[program:cli-dev]
command=npm run start
directory=/workspace
user=developer
autostart=false
autorestart=true
redirect_stderr=true
stdout_logfile=/workspace/logs/cli-dev.log
stdout_logfile_maxbytes=10MB
stdout_logfile_backups=3
environment=NODE_ENV=development

[program:typescript-watch]
command=npm run build:packages -- --watch
directory=/workspace
user=developer
autostart=false
autorestart=true
redirect_stderr=true
stdout_logfile=/workspace/logs/typescript-watch.log
stdout_logfile_maxbytes=10MB
stdout_logfile_backups=3

[group:gemini-dev]
programs=agent-server,cli-dev,typescript-watch
priority=999